(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{375:function(e,t,n){var content=n(525);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(15).default)("53f50082",content,!0,{sourceMap:!1})},523:function(e,t,n){var map={"./af":378,"./af.js":378,"./ar":379,"./ar-dz":380,"./ar-dz.js":380,"./ar-kw":381,"./ar-kw.js":381,"./ar-ly":382,"./ar-ly.js":382,"./ar-ma":383,"./ar-ma.js":383,"./ar-sa":384,"./ar-sa.js":384,"./ar-tn":385,"./ar-tn.js":385,"./ar.js":379,"./az":386,"./az.js":386,"./be":387,"./be.js":387,"./bg":388,"./bg.js":388,"./bm":389,"./bm.js":389,"./bn":390,"./bn.js":390,"./bo":391,"./bo.js":391,"./br":392,"./br.js":392,"./bs":393,"./bs.js":393,"./ca":394,"./ca.js":394,"./cs":395,"./cs.js":395,"./cv":396,"./cv.js":396,"./cy":397,"./cy.js":397,"./da":398,"./da.js":398,"./de":399,"./de-at":400,"./de-at.js":400,"./de-ch":401,"./de-ch.js":401,"./de.js":399,"./dv":402,"./dv.js":402,"./el":403,"./el.js":403,"./en-SG":404,"./en-SG.js":404,"./en-au":405,"./en-au.js":405,"./en-ca":406,"./en-ca.js":406,"./en-gb":407,"./en-gb.js":407,"./en-ie":408,"./en-ie.js":408,"./en-il":409,"./en-il.js":409,"./en-nz":410,"./en-nz.js":410,"./eo":411,"./eo.js":411,"./es":412,"./es-do":413,"./es-do.js":413,"./es-us":414,"./es-us.js":414,"./es.js":412,"./et":415,"./et.js":415,"./eu":416,"./eu.js":416,"./fa":417,"./fa.js":417,"./fi":418,"./fi.js":418,"./fo":419,"./fo.js":419,"./fr":420,"./fr-ca":421,"./fr-ca.js":421,"./fr-ch":422,"./fr-ch.js":422,"./fr.js":420,"./fy":423,"./fy.js":423,"./ga":424,"./ga.js":424,"./gd":425,"./gd.js":425,"./gl":426,"./gl.js":426,"./gom-latn":427,"./gom-latn.js":427,"./gu":428,"./gu.js":428,"./he":429,"./he.js":429,"./hi":430,"./hi.js":430,"./hr":431,"./hr.js":431,"./hu":432,"./hu.js":432,"./hy-am":433,"./hy-am.js":433,"./id":434,"./id.js":434,"./is":435,"./is.js":435,"./it":436,"./it-ch":437,"./it-ch.js":437,"./it.js":436,"./ja":438,"./ja.js":438,"./jv":439,"./jv.js":439,"./ka":440,"./ka.js":440,"./kk":441,"./kk.js":441,"./km":442,"./km.js":442,"./kn":443,"./kn.js":443,"./ko":444,"./ko.js":444,"./ku":445,"./ku.js":445,"./ky":446,"./ky.js":446,"./lb":447,"./lb.js":447,"./lo":448,"./lo.js":448,"./lt":449,"./lt.js":449,"./lv":450,"./lv.js":450,"./me":451,"./me.js":451,"./mi":452,"./mi.js":452,"./mk":453,"./mk.js":453,"./ml":454,"./ml.js":454,"./mn":455,"./mn.js":455,"./mr":456,"./mr.js":456,"./ms":457,"./ms-my":458,"./ms-my.js":458,"./ms.js":457,"./mt":459,"./mt.js":459,"./my":460,"./my.js":460,"./nb":461,"./nb.js":461,"./ne":462,"./ne.js":462,"./nl":463,"./nl-be":464,"./nl-be.js":464,"./nl.js":463,"./nn":465,"./nn.js":465,"./pa-in":466,"./pa-in.js":466,"./pl":467,"./pl.js":467,"./pt":468,"./pt-br":469,"./pt-br.js":469,"./pt.js":468,"./ro":470,"./ro.js":470,"./ru":471,"./ru.js":471,"./sd":472,"./sd.js":472,"./se":473,"./se.js":473,"./si":474,"./si.js":474,"./sk":475,"./sk.js":475,"./sl":476,"./sl.js":476,"./sq":477,"./sq.js":477,"./sr":478,"./sr-cyrl":479,"./sr-cyrl.js":479,"./sr.js":478,"./ss":480,"./ss.js":480,"./sv":481,"./sv.js":481,"./sw":482,"./sw.js":482,"./ta":483,"./ta.js":483,"./te":484,"./te.js":484,"./tet":485,"./tet.js":485,"./tg":486,"./tg.js":486,"./th":487,"./th.js":487,"./tl-ph":488,"./tl-ph.js":488,"./tlh":489,"./tlh.js":489,"./tr":490,"./tr.js":490,"./tzl":491,"./tzl.js":491,"./tzm":492,"./tzm-latn":493,"./tzm-latn.js":493,"./tzm.js":492,"./ug-cn":494,"./ug-cn.js":494,"./uk":495,"./uk.js":495,"./ur":496,"./ur.js":496,"./uz":497,"./uz-latn":498,"./uz-latn.js":498,"./uz.js":497,"./vi":499,"./vi.js":499,"./x-pseudo":500,"./x-pseudo.js":500,"./yo":501,"./yo.js":501,"./zh-cn":502,"./zh-cn.js":502,"./zh-hk":503,"./zh-hk.js":503,"./zh-tw":504,"./zh-tw.js":504};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}o.keys=function(){return Object.keys(map)},o.resolve=r,e.exports=o,o.id=523},524:function(e,t,n){"use strict";var o=n(375);n.n(o).a},525:function(e,t,n){(e.exports=n(14)(!1)).push([e.i,".v-chip{padding:5px}.v-chip.user{background:red;color:#fff}.v-chip.user .v-icon{color:#fff}.message__bubble{display:flex;flex-direction:column}.message{font-weight:700}.speech{display:none}.message__input{position:fixed;bottom:0;left:0;right:0;padding:15px;background:#fff;display:flex;z-index:5}.chat{padding-bottom:150px;align-items:flex-start;min-height:100vh}@media (max-width:767px){.message__input{flex-direction:column}}",""])},547:function(e,t,n){"use strict";n.r(t);var o=n(142),r=n.n(o),c=(n(377),n(133)),l=n(374),d=n.n(l),m={components:{VueTelInput:r.a},data:function(){return{chatData:null,userNumber:null,insertedNumber:"",preferredCountries:["GB"],message:"",mute:!0,voiceMute:!1,noCall:!1,setupComplete:!1,dialog:!0}},beforeMount:function(){var e=this;c.a.on("newMessage",function(t){if(t._id==e.chatData._id){if(e.chatData.messages.push(t),!0!==e.voiceMute&&t.number!==e.userNumber){var n=new SpeechSynthesisUtterance(t.message);if(window.speechSynthesis.speak(n),0==e.mute){console.log("Muted is mute"),e.mute=!0;var o=t.message.length;console.log(o);var r=100*o,c=e;setTimeout(function(){console.log(r),console.log("unmute"),c.mute=!1},r)}}e.scrollBottom()}}),c.a.on("callEnded",function(t){t._id==e.chatData._id&&(e.chatData.ended=!0)})},created:function(){var e=this;this.$axios.get("/api/chats/find/"+this.$route.params.slug).then(function(t){e.chatData=t.data}).catch(function(t){console.log(t),e.noCall=!0})},methods:{scrollBottom:function(){window.scrollTo(0,document.body.scrollHeight)},convertToDate:function(e){return d.a.unix(e).format("hh:mm")},pushMessage:function(e){var t=this;console.log("sending message");var n=new FormData;if(n.append("number",this.insertedNumber),null==e){if(""==this.message)return;n.append("message",this.message)}else n.append("message",e);n.append("chat_id",this.chatData._id),this.$axios.put("/api/chats/message",n).then(function(e){console.log(e),t.message=""}).catch(function(e){console.log(e)})},numberChecker:function(){this.insertedNumber==this.chatData.caller||this.insertedNumber==this.chatData.receiver?this.userNumber=this.insertedNumber:console.log("incorrect number")},onEnd:function(e){var t=e.lastSentence;e.transcription;console.log(t);var n=t;!0!==this.mute&&this.pushMessage(n)},listenMessage:function(e){console.log(e);var t=new SpeechSynthesisUtterance(e);window.speechSynthesis.speak(t)},endCall:function(){console.log("call ended"),console.log("sending message");var e=new FormData;e.append("chat_id",this.chatData._id),this.$axios.put("/api/chats/endcall",e).then(function(e){console.log(e)}).catch(function(e){console.log(e)})}}},v=(n(524),n(39)),h=n(71),j=n.n(h),f=n(134),_=n(507),k=n(549),x=n(506),y=n(542),C=n(128),w=n(548),z=n(543),D=n(130),M=n(135),N=n(131),V=n(132),S=n(369),T=n(544),component=Object(v.a)(m,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{bg:"","fill-height":"","text-xs-center":""}},[null!==e.chatData&&null!==e.userNumber?n("v-flex",[0==e.chatData.ended?[0==e.setupComplete?n("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("Configure your Experience")]),e._v(" "),n("v-card-text",[n("div",[n("p",[e._v("Microphone for Speech to Text")]),e._v(" "),n("v-btn",{attrs:{flat:"",icon:"",color:"pink"},on:{click:function(t){e.mute=!e.mute}}},[e.mute?n("v-icon",{attrs:{"x-large":""}},[e._v("mic_off")]):n("v-icon",{attrs:{"x-large":""}},[e._v("mic")])],1)],1),e._v(" "),n("div",[n("p",[e._v("Messages to be played through Audio Voice")]),e._v(" "),n("v-btn",{attrs:{flat:"",icon:"",color:"pink"},on:{click:function(t){e.voiceMute=!e.voiceMute}}},[e.voiceMute?n("v-icon",{attrs:{"x-large":""}},[e._v("volume_off")]):n("v-icon",{attrs:{"x-large":""}},[e._v("volume_up")])],1)],1)]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1):e._e(),e._v(" "),n("v-layout",{staticClass:"chat",attrs:{row:"",wrap:"","align-center":""}},[n("v-flex",{attrs:{sm12:""}},e._l(e.chatData.messages,function(t,o){return n("div",{key:o,class:{"text-xs-right":t.number!==e.userNumber,"text-xs-left":t.number==e.userNumber}},[n("v-chip",{class:{user:t.number==e.userNumber}},[n("div",{staticClass:"message__bubble"},[n("span",{staticClass:"message"},[e._v(e._s(t.message))]),e._v(" "),n("span",{staticClass:"time"},[e._v("Sent: "+e._s(e.convertToDate(t.time)))])]),e._v(" "),n("v-btn",{attrs:{flat:"",icon:"",color:"pink"},on:{click:function(n){return e.listenMessage(t.message)}}},[n("v-icon",[e._v("volume_up")])],1)],1)],1)}),0)],1),e._v(" "),n("div",{staticClass:"message__input"},[n("vue-speech",{staticClass:"speech",on:{onTranscriptionEnd:e.onEnd}}),e._v(" "),n("v-text-field",{attrs:{label:"type your Message",placeholder:"Message Here"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),e._v(" "),n("v-btn",{staticClass:"orange",on:{click:function(t){return e.pushMessage()}}},[e._v("Send a message")]),e._v(" "),n("dir",[n("v-btn",{attrs:{flat:"",icon:"",color:"pink"},on:{click:function(t){e.mute=!e.mute}}},[e.mute?n("v-icon",[e._v("mic_off")]):n("v-icon",[e._v("mic")])],1),e._v(" "),n("v-btn",{attrs:{flat:"",icon:"",color:"pink"},on:{click:function(t){e.voiceMute=!e.voiceMute}}},[e.voiceMute?n("v-icon",[e._v("volume_off")]):n("v-icon",[e._v("volume_up")])],1),e._v(" "),n("v-btn",{attrs:{flat:"",icon:"",color:"pink"},on:{click:function(t){return e.endCall()}}},[n("v-icon",[e._v("call_end")])],1)],1)],1)]:[e._v("The call has ended")]],2):null!==e.chatData&&null==e.userNumber?n("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":"","text-xs-center":""}},[n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("div",{staticClass:"center--box"},[n("h3",{staticClass:"headline mb-0"},[e._v("Please insert your number to enter the chat")]),e._v(" "),n("vue-tel-input",{attrs:{preferredCountries:e.preferredCountries,defaultCountry:"GB"},on:{input:function(t){return e.numberChecker()}},model:{value:e.insertedNumber,callback:function(t){e.insertedNumber=t},expression:"insertedNumber"}})],1)])],1)],1):e.noCall?n("v-flex",[n("p",[e._v("Call does not exist!")])]):n("v-flex",[n("p",[e._v("Loading the Call")]),e._v(" "),n("v-progress-circular",{attrs:{width:5,size:100,color:"red",indeterminate:""}})],1)],1)},[],!1,null,null,null);t.default=component.exports;j()(component,{VBtn:f.a,VCard:_.a,VCardActions:k.a,VCardText:k.b,VCardTitle:x.a,VChip:y.a,VContainer:C.a,VDialog:w.a,VDivider:z.a,VFlex:D.a,VIcon:M.a,VLayout:N.a,VProgressCircular:V.a,VSpacer:S.a,VTextField:T.a})}}]);